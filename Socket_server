import socket,sys
HOST = '127.0.0.1'
PORT = 7000

try:
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
except socket.error as msg:
    sys.stderr.write('[ERROR] %s\n' % msg[1])
    sys.exit(1)

server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) #重設tcp
server.bind((HOST, PORT)) #綁定IP
server.listen(5) #監聽(最多可有()人連線)
# server.settimeout(10) #閒置時間

print('Server start at: %s:%s' %(HOST, PORT))
print('wait for connection...')

while True: #持續接收
    (client, addr) = server.accept() #接收client
    print('Client by ', addr)

    while True:
        data = client.recv(1024) #接收字元
        print(data)
        client.send("server received you message.")

# client.close()
